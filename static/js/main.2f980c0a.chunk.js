(this["webpackJsonpwine-n-beats"]=this["webpackJsonpwine-n-beats"]||[]).push([[0],{201:function(e){e.exports=JSON.parse('{"C0":16.35,"C#0":17.32,"D0":18.35,"D#0":19.45,"E0":20.6,"F0":21.83,"F#0":23.12,"G0":24.5,"G#0":25.96,"A0":27.5,"A#0":29.14,"B0":30.87,"C1":32.7,"C#1":34.65,"D1":36.71,"D#1":38.89,"E1":41.2,"F1":43.65,"F#1":46.25,"G1":49,"G#1":51.91,"A1":55,"A#1":58.27,"B1":61.74,"C2":65.41,"C#2":69.3,"D2":73.42,"D#2":77.78,"E2":82.41,"F2":87.31,"F#2":92.5,"G2":98,"G#2":103.83,"A2":110,"A#2":116.54,"B2":123.47,"C3":130.81,"C#3":138.59,"D3":146.83,"D#3":155.56,"E3":164.81,"F3":174.61,"F#3":185,"G3":196,"G#3":207.65,"A3":220,"A#3":233.08,"B3":246.94,"C4":261.63,"C#4":277.18,"D4":293.66,"D#4":311.13,"E4":329.63,"F4":349.23,"F#4":369.99,"G4":392,"G#4":415.3,"A4":440,"A#4":466.16,"B4":493.88,"C5":523.25,"C#5":554.37,"D5":587.33,"D#5":622.25,"E5":659.26,"F5":698.46,"F#5":739.99,"G5":783.99,"G#5":830.61,"A5":880,"A#5":932.33,"B5":987.77,"C6":1046.5,"C#6":1108.73,"D6":1174.66,"D#6":1244.51,"E6":1318.51,"F6":1396.91,"F#6":1479.98,"G6":1567.98,"G#6":1661.22,"A6":1760,"A#6":1864.66,"B6":1975.53,"C7":2093,"C#7":2217.46,"D7":2349.32,"D#7":2489.02,"E7":2637.02,"F7":2793.83,"F#7":2959.96,"G7":3135.96,"G#7":3322.44,"A7":3520,"A#7":3729.31,"B7":3951.07,"C8":4186.01,"C#8":4434.92,"D8":4698.64,"D#8":4978.03}')},304:function(e,t){},305:function(e,t){},313:function(e,t){},316:function(e,t){},317:function(e,t){},366:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){"use strict";n.r(t);var a=n(106),s=n.n(a),i=n(252),c=n.n(i),r=n(2),o=n.n(r),l=n(10),u=n(1),p=n(3),h=n(16),d=n(4),j=n(5),m=n(194),b=(n(366),function(){function e(){Object(u.a)(this,e),this.ctx=new(window.AudioContext||window.webkitAudioContext)}return Object(p.a)(e,[{key:"playNotes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t.length<=0)){var a=this.ctx.createOscillator();a.type=n.type.toLowerCase(),a.frequency.value=t[0];var s=this.ctx.createDelay();s.delayTime.value=n.delay?n.bpm/2e3:0;var i=this.ctx.createGain();i.gain.value=1,a.connect(i),i.connect(s),i.connect(this.ctx.destination),s.connect(this.ctx.destination),a.start(0),setTimeout((function(){i.gain.setTargetAtTime(0,e.ctx.currentTime,.015)}),n.release)}}}]),e}()),v=n(200),y=n.n(v),f=n(201),g=n(39),x=[[0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0]],O=function(e){return Object.keys(f).reduce((function(t,n){return n.split("").pop()===String(e)&&(t[n]=f[n]),t}),{})},T=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).state={type:"sine",pads:x,bpm:150,release:100,step:-1,steps:16,playing:!1,octave:4,delay:!1,notes:O(4)},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.generateMelody=a.generateMelody.bind(Object(h.a)(a)),a.myRef=s.a.createRef(),a.melodyrnn=new m.a("https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/melody_rnn"),a.rnnPlayer=new m.b,a.noteSeq={notes:[{pitch:60,startTime:0,endTime:.5},{pitch:60,startTime:.5,endTime:1},{pitch:67,startTime:1,endTime:1.5},{pitch:67,startTime:1.5,endTime:2},{pitch:69,startTime:2,endTime:2.5},{pitch:69,startTime:2.5,endTime:3},{pitch:67,startTime:3,endTime:4},{pitch:65,startTime:4,endTime:4.5},{pitch:65,startTime:4.5,endTime:5},{pitch:64,startTime:5,endTime:5.5},{pitch:64,startTime:5.5,endTime:6},{pitch:62,startTime:6,endTime:6.5},{pitch:62,startTime:6.5,endTime:7},{pitch:60,startTime:7,endTime:8}],totalTime:8},a.rnnSteps=20,a.rnnTemp=1.5,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateMelody",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("generating melody"),!this.rnnPlayer.isPlaying()){e.next=4;break}return this.rnnPlayer.stop(),e.abrupt("return");case 4:return e.prev=4,t=m.c.quantizeNoteSequence(this.noteSeq,4),e.next=8,this.melodyrnn.continueSequence(t,this.rnnSteps,this.rnnTemp);case 8:n=e.sent,console.log("the result sequence is: ",n),this.rnnPlayer.start(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"changeRelease",value:function(e){var t=this;this.setState({release:e},(function(){t.pause(),t.state.playing&&t.play()}))}},{key:"changeBPM",value:function(e){var t=this;e>300||e<60||this.setState((function(){return{bpm:e}}),(function(){t.pause(),t.state.playing&&t.play()}))}},{key:"changeWaveType",value:function(e){var t=this;this.setState((function(){return{type:e}}),(function(){t.pause(),t.state.playing&&t.play()}))}},{key:"changeOctave",value:function(e){var t=this;this.setState({octave:Number(e),notes:O(Number(e))},(function(){t.pause(),t.state.playing&&t.play()}))}},{key:"play",value:function(){var e=this;this.synth=new b;var t=this.state,n=t.bpm,a=t.notes,s=t.type,i=t.release,c=t.delay,r=Object.keys(a).map((function(e){return a[e]}));this.setState((function(){return{playing:!0}})),this.interval=setInterval((function(){e.setState((function(e){return{step:e.step<e.steps-1?e.step+1:0}}),(function(){var t=e.state.pads[e.state.step].map((function(e,t){return 1===e?r[t]:null})).filter((function(e){return e}));e.synth.playNotes(t,{release:i,bpm:n,type:s,delay:c})}))}),6e4/this.state.bpm/2)}},{key:"pause",value:function(){this.setState((function(){return{playing:!1,step:0}})),clearInterval(this.interval)}},{key:"togglePad",value:function(e,t){this.setState((function(n){var a=n.pads.slice(0),s=a[e][t];return a[e]=[0,0,0,0,0,0,0,0,0,0,0,0],a[e][t]=1===s?0:1,{pads:a}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.pads,a=t.step,i=t.notes;return Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"board",children:Object(g.jsx)("div",{className:"Sequencer",children:Object(g.jsxs)("div",{className:"seq-wrapper",children:[Object(g.jsx)("ul",{className:"notes",children:Object.keys(i).slice(0,12).reverse().map((function(e){return Object(g.jsx)("li",{children:e.slice(0,e.length-1)},"note-".concat(e))}))}),Object(g.jsx)("div",{className:"pad-wrapper",children:Object(g.jsx)("div",{className:"flex",children:n.map((function(t,n){return Object(g.jsx)("div",{className:"pads",children:t.map((function(t,s){return Object(g.jsx)("div",{id:"pad-group-".concat(s),className:y()("pad",{active:n===a,on:1===t}),onClick:function(){e.togglePad(n,s)}},"pad-group-".concat(s))}))},"pad-".concat(n))}))})})]})})}),Object(g.jsx)("div",{className:"buttons",children:Object(g.jsxs)("div",{className:"button-wrapper",children:[Object(g.jsx)("button",{type:"button",className:this.state.playing?"active":"",onClick:function(){e.state.playing?e.pause():e.play()},children:"play"}),Object(g.jsxs)("div",{className:"select-wrapper",children:[Object(g.jsx)("span",{children:"bpm"}),Object(g.jsx)("input",{type:"number",min:"80",max:"300",step:"1",defaultValue:this.state.bpm,onChange:function(t){return e.changeBPM(t.target.value)}})]}),Object(g.jsxs)("div",{className:"select-wrapper",children:[Object(g.jsx)("span",{children:"wave"}),Object(g.jsxs)("select",{value:this.state.type,"data-label":"wave",className:"wave",onChange:function(t){return e.changeWaveType(t.target.value)},children:[Object(g.jsx)("option",{children:"sine"}),Object(g.jsx)("option",{children:"square"}),Object(g.jsx)("option",{children:"sawtooth"}),Object(g.jsx)("option",{children:"triangle"})]})]}),Object(g.jsxs)("div",{className:"select-wrapper",children:[Object(g.jsx)("span",{children:"octave"}),Object(g.jsxs)("select",{value:this.state.octave,"data-label":"octave",className:"octave",onChange:function(t){return e.changeOctave(t.target.value)},children:[Object(g.jsx)("option",{children:"1"}),Object(g.jsx)("option",{children:"2"}),Object(g.jsx)("option",{children:"3"}),Object(g.jsx)("option",{children:"4"}),Object(g.jsx)("option",{children:"5"}),Object(g.jsx)("option",{children:"6"}),Object(g.jsx)("option",{children:"7"})]})]}),Object(g.jsxs)("div",{className:"select-wrapper",children:[Object(g.jsx)("span",{children:"release"}),Object(g.jsx)("input",{type:"number",min:"0",max:"400",step:"1",defaultValue:this.state.release,onChange:function(t){return e.changeRelease(t.target.value)}})]}),Object(g.jsx)("button",{type:"button",className:y()({active:this.state.delay}),onClick:function(){e.setState((function(e){return{delay:!e.delay}}),(function(){e.pause(),e.state.playing&&e.play()}))},children:"delay"})]})})]})})}}]),n}(a.Component);n(368);c.a.render(Object(g.jsx)(T,{}),document.getElementById("root"))}},[[369,1,2]]]);
//# sourceMappingURL=main.2f980c0a.chunk.js.map